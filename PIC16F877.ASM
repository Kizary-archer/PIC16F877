
;================================================
; Настройка и конфигурация микроконтроллера
;================================================
	LIST  p=16F877
	#include <p16F877.inc> 
;================================================
; Инициализация регистров специального назначения
;================================================

INTCON			equ 0x0B
STATUS			equ 0x03
PORTD			equ 0x08
TRISD			equ 0x88
PORTB			equ 0x06
TRISB			equ 0x86

;================================================
; Инициализация констант
;================================================

RP0			equ 0x05
C           equ 0x00

;================================================
; Инициализация переменных в памяти данных
;================================================

;================================================
; Начало программы
;================================================
	ORG 0x00
	goto Start

Start:
	clrf INTCON			;запрещаем все прерывания

;===============================================
; Настраиваем линии порта PORTD на выход
;===============================================

	bsf STATUS,RP0			;переходим в банк 1
	
	CLRF TRISD
	CLRF TRISB	
;	BSF TRISB,0x00 ;кнопка
					
	BCF STATUS,RP0		;переходим в банк 0
			

;===============================================
; Закончили настройку
;===============================================

BSF STATUS,C
BSF PORTB,0x00
CLRF PORTD	
movlw B'11111111'
movwf PORTB

LOOP:


	RLF PORTD,1
	BTFSC PORTB,0x00
	GOTO BUTTONCLICK

GOTO LOOP

BUTTONCLICK:

	BTFSS PORTD,0x00 ;проверка на 1цу первого светодиода
	GOTO LOOP
	BTFSC STATUS,C
	GOTO LOOP
	BSF STATUS,C
	GOTO LOOP

 XOR255:
        MOVF      PORTD,W   ; копировать из KLOP в W
        BCF       STATUS,Z ; опустим флаг Z в ноль
        XORLW     .255     ; проводим сравнение с числом 255(все светодиоды горят)
        BTFSC     STATUS,Z ; делаем бит-проверку Z-флага

; если Z=1, то выполняется следующая инструкция, иначе – пропускается

 XOR0:
        MOVF      PORTD,W   ; копировать из KLOP в W
        BCF       STATUS,Z ; опустим флаг Z в ноль
        XORLW     .255     ; проводим сравнение с числом 255(все светодиоды горят)
        BTFSC     STATUS,Z ; делаем бит-проверку Z-флага

; если Z=1, то выполняется следующая инструкция, иначе – пропускается

End